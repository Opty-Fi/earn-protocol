{
  "title": "Registry - Add,Update,Remove Risk Profiles",
  "description": "Test cases for Registry contract",
  "stories": [
    {
      "description": "User should be able to add a Risk Profile",
      "setActions": [
        {
          "action": "addRiskProfile(string,uint8,(uint8,uint8))",
          "args": {
            "riskProfile": "RP1",
            "noOfSteps": 1,
            "poolRatingRange": [0, 10]
          },
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP1"
          },
          "expectedValue": {
            "noOfSteps": 1,
            "lowerLimit": 0,
            "upperLimit": 10,
            "exists": true
          }
        }
      ]
    },
    {
      "description": "User shouldn't be able to add the existing Risk Profile",
      "setActions": [
        {
          "action": "addRiskProfile(string,uint8,(uint8,uint8))",
          "args": {
            "riskProfile": "RP1",
            "noOfSteps": 1,
            "poolRatingRange": [0, 10]
          },
          "expect": "fail",
          "message": "RP_already_exists"
        }
      ],
      "getActions": []
    },
    {
      "description": "User shouldn't be able to add the empty Risk Profile",
      "setActions": [
        {
          "action": "addRiskProfile(string,uint8,(uint8,uint8))",
          "args": {
            "riskProfile": "",
            "noOfSteps": 1,
            "poolRatingRange": [0, 10]
          },
          "expect": "fail",
          "message": "RP_Empty!"
        }
      ],
      "getActions": []
    },
    {
      "description": "User should be able to update no. of steps for Risk Profile",
      "setActions": [
        {
          "action": "updateRiskProfileSteps(string,uint8)",
          "args": {
            "riskProfile": "RP1",
            "noOfSteps": 2
          },
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP1"
          },
          "expectedValue": {
            "noOfSteps": 2,
            "lowerLimit": 0,
            "upperLimit": 10,
            "exists": true
          }
        }
      ]
    },
    {
      "description": "User shouldn't be able to update no. of steps for non-existing Risk Profile",
      "setActions": [
        {
          "action": "updateRiskProfileSteps(string,uint8)",
          "args": {
            "riskProfile": "Non-Existing-RP",
            "noOfSteps": 2
          },
          "expect": "fail",
          "message": "!Rp_Exists"
        }
      ],
      "getActions": []
    },
    {
      "description": "User should be able to update pool ratings for Risk Profile",
      "setActions": [
        {
          "action": "updateRPPoolRatings(string,(uint8,uint8))",
          "args": {
            "riskProfile": "RP1",
            "poolRatingRange": [0, 20]
          },
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP1"
          },
          "expectedValue": {
            "noOfSteps": 2,
            "lowerLimit": 0,
            "upperLimit": 20,
            "exists": true
          }
        }
      ]
    },
    {
      "description": "User shouldn't be able to update pool ratings for non-existing Risk Profile",
      "setActions": [
        {
          "action": "updateRPPoolRatings(string,(uint8,uint8))",
          "args": {
            "riskProfile": "Non-Existing-RP",
            "poolRatingRange": [0, 20]
          },
          "expect": "fail",
          "message": "!Rp_Exists"
        }
      ],
      "getActions": []
    },
    {
      "description": "User should be able to remove the Risk Profile",
      "setActions": [
        {
          "action": "removeRiskProfile(uint256)",
          "args": {
            "riskProfile": "RP1"
          },
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP1"
          },
          "expectedValue": {
            "noOfSteps": 0,
            "lowerLimit": null,
            "upperLimit": null,
            "exists": false
          }
        }
      ]
    },
    {
      "description": "User shouldn't be able to remove the Risk Profile from invalid index",
      "setActions": [
        {
          "action": "removeRiskProfile(uint256)",
          "args": {
            "index": 100
          },
          "expect": "fail",
          "message": "Invalid_Rp_index"
        }
      ],
      "getActions": []
    },
    {
      "description": "User should be able to set a single Risk Profile",
      "setActions": [
        {
          "action": "addRiskProfile(string[],uint8[],(uint8,uint8)[])",
          "args": {
            "riskProfile": ["RP1", "RP2", "RP3"],
            "noOfSteps": [1, 2, 3],
            "poolRatingsRange": [
              [0, 20],
              [0, 40],
              [0, 60]
            ]
          },
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP1"
          },
          "expectedValue": {
            "noOfSteps": 1,
            "lowerLimit": 0,
            "upperLimit": 20,
            "exists": true
          }
        },
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP2"
          },
          "expectedValue": {
            "noOfSteps": 2,
            "lowerLimit": 0,
            "upperLimit": 40,
            "exists": true
          }
        },
        {
          "action": "riskProfiles(string)",

          "args": {
            "riskProfile": "RP3"
          },
          "expectedValue": {
            "noOfSteps": 3,
            "lowerLimit": 0,
            "upperLimit": 60,
            "exists": true
          }
        }
      ]
    }
  ]
}
